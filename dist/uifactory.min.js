"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function uiFactory(e,t,r,o){"string"==typeof e&&(e=document.createElement(e)),e.definedByUiFactoryPropertyDescriptors||Object.defineProperties(e,uiFactory.propertyDescriptors),e.uiFactoryAttributes=t,e.uiFactoryChildElements=r;var n,i=_toConsumableArray(e.childNodes).map(function(e){return e instanceof HTMLElement?uiFactory(e):e});0<i.length&&(e.uiFactoryChildElements=e.uiFactoryChildElements?Array.isArray(e.uiFactoryChildElements)?e.uiFactoryChildElements:[e.uiFactoryChildElements]:[],(n=e.uiFactoryChildElements).unshift.apply(n,_toConsumableArray(i)));return e.render(o,!1)}uiFactory.propertyDescriptors={definedByUiFactoryPropertyDescriptors:{value:!0},uiFactoryAttributes:{writable:!0},uiFactoryChildElements:{writable:!0},render:{value:function(e,t){var u=this,c=!(1<arguments.length&&void 0!==t)||t;return Promise.all([function r(o,t,n){if(null!=o)return o instanceof Promise?o.then(function(e){return r(e,t,n)}):"function"==typeof o?r(o(u),t,n):Array.isArray(o)?Promise.all(o.map(function(e,t){return r(e,t,o)})):"object"===_typeof(o)?Promise.all(Object.keys(o).map(function(e){return u.removeAttribute(e),r(o[e],e,o)})):void(t&&("function"!=typeof n[t]&&delete n[t],u.setAttribute(t,o)))}(this.uiFactoryAttributes),function(e){for(;u.firstChild;)u.removeChild(u.firstChild);return function r(o,n,t,i){if(n=n||u.appendChild(document.createTextNode("")),null!=o){if(o instanceof Promise)return o.then(function(e){return r(e,n,t,i)});if("function"==typeof o)return r(o(u),n,t,i);if(Array.isArray(o)){var e=Promise.all(o.map(function(e,t){return r(e,u.insertBefore(document.createTextNode(""),n),o,t)}));return u.removeChild(n),e}if(o instanceof HTMLElement||o instanceof Text||o instanceof SVGElement)return u.insertBefore(o,n),u.removeChild(n),c&&o.definedByUiFactoryPropertyDescriptors?new Promise(function(e){o.render(e)}):void 0;if("object"!==_typeof(o))return"boolean"==typeof o||"number"==typeof o||"string"==typeof o?(o=uiFactory.stringToHtml(o),t&&i&&"function"!=typeof t[i]&&(t[i]=o),r(o,n,t,i)):void 0;var a=Promise.all(Object.keys(o).map(function(e){return r(o[e],u.insertBefore(document.createTextNode(""),n),o,e)}));return u.removeChild(n),a}u.removeChild(n)}(e)}(this.uiFactoryChildElements)]).then(function(){e&&e(u)}),this}}},uiFactory.stringToHtml=function(e){var t=document.createElement("div");return t.innerHTML=e,_toConsumableArray(t.childNodes).map(function(e){return e instanceof HTMLElement?uiFactory(e):e})},uiFactory.arrayToString=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:" ";return Array.isArray(e)||(e=[e]),e.filter(function(e){return null!=e}).join(t)},uiFactory.when=function(e,t,r){return"function"==typeof e&&(e=e()),e?("function"==typeof t&&(t=t()),t):("function"==typeof r&&(r=r()),r)},uiFactory.exec=function(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return e.apply(void 0,r)},["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"].forEach(function(o){uiFactory[o]=function(e,t,r){return uiFactory(o,e,t,r)}}),uiFactory.svg=function(e,t,r,o){return"string"==typeof e&&(e=document.createElementNS("http://www.w3.org/2000/svg",e)),uiFactory(e,t,r,o)},["a","animate","animateMotion","animateTransform","circle","clipPath","color-profile","defs","desc","discard","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","foreignObject","g","hatch","hatchpath","image","line","linearGradient","marker","mask","mesh","meshgradient","meshpatch","meshrow","metadata","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","solidcolor","stop","style","svg","switch","symbol","text","textPath","title","tspan","unknown","use","view"].forEach(function(o){uiFactory.svg[o]=function(e,t,r){return uiFactory.svg(o,e,t,r)}}),window.uif||(window.uif=uiFactory);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVpZmFjdG9yeS5qcyJdLCJuYW1lcyI6WyJfdHlwZW9mIiwib2JqIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJjb25zdHJ1Y3RvciIsInByb3RvdHlwZSIsIl90b0NvbnN1bWFibGVBcnJheSIsImFyciIsIl9hcnJheVdpdGhvdXRIb2xlcyIsIl9pdGVyYWJsZVRvQXJyYXkiLCJfbm9uSXRlcmFibGVTcHJlYWQiLCJUeXBlRXJyb3IiLCJpdGVyIiwiT2JqZWN0IiwidG9TdHJpbmciLCJjYWxsIiwiQXJyYXkiLCJmcm9tIiwiaXNBcnJheSIsImkiLCJhcnIyIiwibGVuZ3RoIiwidWlGYWN0b3J5IiwiZWxlbWVudCIsImF0dHJpYnV0ZXMiLCJjaGlsZEVsZW1lbnRzIiwiY2FsbGJhY2siLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJkZWZpbmVkQnlVaUZhY3RvcnlQcm9wZXJ0eURlc2NyaXB0b3JzIiwiZGVmaW5lUHJvcGVydGllcyIsInByb3BlcnR5RGVzY3JpcHRvcnMiLCJ1aUZhY3RvcnlBdHRyaWJ1dGVzIiwidWlGYWN0b3J5Q2hpbGRFbGVtZW50cyIsIl9lbGVtZW50JHVpRmFjdG9yeUNoaSIsIm9yaWdpbmFsQ2hpbGRFbGVtZW50cyIsImNoaWxkTm9kZXMiLCJtYXAiLCJjaGlsZE5vZGUiLCJIVE1MRWxlbWVudCIsInVuc2hpZnQiLCJhcHBseSIsInJlbmRlciIsInZhbHVlIiwid3JpdGFibGUiLCJfdGhpcyIsInRoaXMiLCJjaGFpblJlbmRlciIsImFyZ3VtZW50cyIsInVuZGVmaW5lZCIsIlByb21pc2UiLCJhbGwiLCJyZW5kZXJBdHRyaWJ1dGVzIiwia2V5Iiwic291cmNlIiwidGhlbiIsImF0dHJpYnV0ZSIsImluZGV4Iiwia2V5cyIsInJlbW92ZUF0dHJpYnV0ZSIsInNldEF0dHJpYnV0ZSIsImZpcnN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsInJlbmRlckNoaWxkRWxlbWVudHMiLCJwbGFjZWhvbGRlciIsImFwcGVuZENoaWxkIiwiY3JlYXRlVGV4dE5vZGUiLCJyZXR1cm5WYWx1ZSIsImNoaWxkRWxlbWVudCIsImluc2VydEJlZm9yZSIsIlRleHQiLCJTVkdFbGVtZW50IiwicmVzb2x2ZSIsInN0cmluZ1RvSHRtbCIsIl9yZXR1cm5WYWx1ZSIsInByZW5kZXJDaGlsZEVsZW1lbnRzIiwic3RyIiwiaW5uZXJIVE1MIiwiYXJyYXlUb1N0cmluZyIsImpvaW5lciIsImZpbHRlciIsInZhbCIsImpvaW4iLCJ3aGVuIiwiY29uZGl0aW9uIiwidHJ1ZVZhbHVlIiwiZmFsc2VWYWx1ZSIsImV4ZWMiLCJmdW5jIiwiX2xlbiIsImFyZ3MiLCJfa2V5IiwiZm9yRWFjaCIsInRhZyIsInN2ZyIsImNyZWF0ZUVsZW1lbnROUyIsIndpbmRvdyIsInVpZiJdLCJtYXBwaW5ncyI6IkFBQUEsYUFFQSxTQUFTQSxRQUFRQyxHQUF3VCxPQUF0T0QsUUFBckQsbUJBQVhFLFFBQW9ELGlCQUFwQkEsT0FBT0MsU0FBbUMsU0FBaUJGLEdBQU8sY0FBY0EsR0FBMkIsU0FBaUJBLEdBQU8sT0FBT0EsR0FBeUIsbUJBQVhDLFFBQXlCRCxFQUFJRyxjQUFnQkYsUUFBVUQsSUFBUUMsT0FBT0csVUFBWSxnQkFBa0JKLElBQXlCQSxHQUV4VixTQUFTSyxtQkFBbUJDLEdBQU8sT0FBT0MsbUJBQW1CRCxJQUFRRSxpQkFBaUJGLElBQVFHLHFCQUU5RixTQUFTQSxxQkFBdUIsTUFBTSxJQUFJQyxVQUFVLG1EQUVwRCxTQUFTRixpQkFBaUJHLEdBQVEsR0FBSVYsT0FBT0MsWUFBWVUsT0FBT0QsSUFBa0QsdUJBQXpDQyxPQUFPUixVQUFVUyxTQUFTQyxLQUFLSCxHQUFnQyxPQUFPSSxNQUFNQyxLQUFLTCxHQUUxSixTQUFTSixtQkFBbUJELEdBQU8sR0FBSVMsTUFBTUUsUUFBUVgsR0FBTSxDQUFFLElBQUssSUFBSVksRUFBSSxFQUFHQyxFQUFPLElBQUlKLE1BQU1ULEVBQUljLFFBQVNGLEVBQUlaLEVBQUljLE9BQVFGLElBQU9DLEVBQUtELEdBQUtaLEVBQUlZLEdBQU0sT0FBT0Ms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QUFRLFNBQVVDLEdBQ3Y3QnZFLFVBQVV1RSxHQUFPLFNBQVVyRSxFQUFZQyxFQUFlQyxHQUNwRCxPQUFPSixVQUFVdUUsRUFBS3JFLEVBQVlDLEVBQWVDLE1BSXJESixVQUFVd0UsSUFBTSxTQUFVdkUsRUFBU0MsRUFBWUMsRUFBZUMsR0FLNUQsTUFKdUIsaUJBQVpILElBQ1RBLEVBQVVJLFNBQVNvRSxnQkFBZ0IsNkJBQThCeEUsSUFHNURELFVBQVVDLEVBQVNDLEVBQVlDLEVBQWVDLElBR3ZELENBQUMsSUFBSyxVQUFXLGdCQUFpQixtQkFBb0IsU0FBVSxXQUFZLGdCQUFpQixPQUFRLE9BQVEsVUFBVyxVQUFXLFVBQVcsZ0JBQWlCLHNCQUF1QixjQUFlLG1CQUFvQixvQkFBcUIsb0JBQXFCLGlCQUFrQixlQUFnQixVQUFXLFVBQVcsVUFBVyxVQUFXLFVBQVcsaUJBQWtCLFVBQVcsVUFBVyxjQUFlLGVBQWdCLFdBQVksZUFBZ0IscUJBQXNCLGNBQWUsU0FBVSxlQUFnQixTQUFVLGdCQUFpQixJQUFLLFFBQVMsWUFBYSxRQUFTLE9BQVEsaUJBQWtCLFNBQVUsT0FBUSxPQUFRLGVBQWdCLFlBQWEsVUFBVyxXQUFZLFFBQVMsT0FBUSxVQUFXLFVBQVcsV0FBWSxpQkFBa0IsT0FBUSxTQUFVLE1BQU8sYUFBYyxPQUFRLFFBQVMsTUFBTyxTQUFVLFNBQVUsT0FBUSxXQUFZLFFBQVMsUUFBUyxVQUFXLE1BQU8sUUFBUWtFLFFBQVEsU0FBVUMsR0FDNzRCdkUsVUFBVXdFLElBQUlELEdBQU8sU0FBVXJFLEVBQVlDLEVBQWVDLEdBQ3hELE9BQU9KLFVBQVV3RSxJQUFJRCxFQUFLckUsRUFBWUMsRUFBZUMsTUFLcERzRSxPQUFPQyxNQUNWRCxPQUFPQyxJQUFNM0UiLCJmaWxlIjoidWlmYWN0b3J5Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5mdW5jdGlvbiBfdHlwZW9mKG9iaikgeyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07IH0gcmV0dXJuIF90eXBlb2Yob2JqKTsgfVxuXG5mdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7IHJldHVybiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5KGFycikgfHwgX25vbkl0ZXJhYmxlU3ByZWFkKCk7IH1cblxuZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2VcIik7IH1cblxuZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7IGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGl0ZXIpIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpdGVyKSA9PT0gXCJbb2JqZWN0IEFyZ3VtZW50c11cIikgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7IH1cblxuZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGFyci5sZW5ndGgpOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH0gfVxuXG4vKiBleHBvcnRlZCB1aUZhY3RvcnkgKi9cblxuLyoqXG4gKiBDcmVhdGVzIEhUTUwgZWxlbWVudHMgd2l0aCBhZGRpdGlvbmFsIGZ1bmN0aW9uYWxpdGllcy5cbiAqIEBwYXJhbSB7c3RyaW5nfEhUTUxFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0ge29iamVjdHxbb2JqZWN0XX0gYXR0cmlidXRlc1xuICogQHBhcmFtIHtIVE1MRWxlbWVudHxmdW5jdGlvbnxzdHJpbmd8VGV4dHxvYmplY3R8W0hUTUxFbGVtZW50fGZ1bmN0aW9ufHN0cmluZ3xUZXh0fG9iamVjdF19IGNoaWxkRWxlbWVudHNcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrXG4gKiBAcmV0dXJucyB7SFRNTEVsZW1lbnR9XG4gKi9cbmZ1bmN0aW9uIHVpRmFjdG9yeShlbGVtZW50LCBhdHRyaWJ1dGVzLCBjaGlsZEVsZW1lbnRzLCBjYWxsYmFjaykge1xuICAvLyBQYXNzIGVsZW1lbnQgbmFtZSBhcyBzdHJpbmcgdG8gY3JlYXRlIGEgbmV3IGVsZW1lbnQuXG4gIGlmICh0eXBlb2YgZWxlbWVudCA9PT0gJ3N0cmluZycpIHtcbiAgICBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChlbGVtZW50KTtcbiAgfSAvLyBBZGQgZXNzZW50aWFsIHByb3BlcnRpZXMgYW5kIG1ldGhvZC5cblxuXG4gIGlmICghZWxlbWVudC5kZWZpbmVkQnlVaUZhY3RvcnlQcm9wZXJ0eURlc2NyaXB0b3JzKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZWxlbWVudCwgdWlGYWN0b3J5LnByb3BlcnR5RGVzY3JpcHRvcnMpO1xuICB9IC8vIEFkZCB2YWx1ZXMgdG8gZXNzZW50aWFsIHByb3BlcnRpZXMuXG5cblxuICBlbGVtZW50LnVpRmFjdG9yeUF0dHJpYnV0ZXMgPSBhdHRyaWJ1dGVzO1xuICBlbGVtZW50LnVpRmFjdG9yeUNoaWxkRWxlbWVudHMgPSBjaGlsZEVsZW1lbnRzOyAvLyBQcmVwZW5kIGV4aXN0aW5nIGNoaWxkIGVsZW1lbnRzIHRvIHByb3BlcnR5LCBvdGhlcndpc2UgaXQgd2lsbCBiZSByZW1vdmVkIG9uIHRoZSBuZXh0IHJlbmRlci5cblxuICB2YXIgb3JpZ2luYWxDaGlsZEVsZW1lbnRzID0gX3RvQ29uc3VtYWJsZUFycmF5KGVsZW1lbnQuY2hpbGROb2RlcykubWFwKGZ1bmN0aW9uIChjaGlsZE5vZGUpIHtcbiAgICByZXR1cm4gY2hpbGROb2RlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgPyB1aUZhY3RvcnkoY2hpbGROb2RlKSA6IGNoaWxkTm9kZTtcbiAgfSk7XG5cbiAgaWYgKG9yaWdpbmFsQ2hpbGRFbGVtZW50cy5sZW5ndGggPiAwKSB7XG4gICAgdmFyIF9lbGVtZW50JHVpRmFjdG9yeUNoaTtcblxuICAgIGVsZW1lbnQudWlGYWN0b3J5Q2hpbGRFbGVtZW50cyA9IGVsZW1lbnQudWlGYWN0b3J5Q2hpbGRFbGVtZW50cyA/IEFycmF5LmlzQXJyYXkoZWxlbWVudC51aUZhY3RvcnlDaGlsZEVsZW1lbnRzKSA/IGVsZW1lbnQudWlGYWN0b3J5Q2hpbGRFbGVtZW50cyA6IFtlbGVtZW50LnVpRmFjdG9yeUNoaWxkRWxlbWVudHNdIDogW107XG5cbiAgICAoX2VsZW1lbnQkdWlGYWN0b3J5Q2hpID0gZWxlbWVudC51aUZhY3RvcnlDaGlsZEVsZW1lbnRzKS51bnNoaWZ0LmFwcGx5KF9lbGVtZW50JHVpRmFjdG9yeUNoaSwgX3RvQ29uc3VtYWJsZUFycmF5KG9yaWdpbmFsQ2hpbGRFbGVtZW50cykpO1xuICB9IC8vIFRyaWdnZXIgcmVuZGVyIGZvciB0aGlzIGVsZW1lbnQgb25seS5cblxuXG4gIHJldHVybiBlbGVtZW50LnJlbmRlcihjYWxsYmFjaywgZmFsc2UpO1xufVxuLyoqIE9iamVjdCBkZXNjcmlwdG9ycyB0byBiZSB1c2VkIG9uIEhUTUxFbGVtZW50cy4gKi9cblxuXG51aUZhY3RvcnkucHJvcGVydHlEZXNjcmlwdG9ycyA9IHtcbiAgZGVmaW5lZEJ5VWlGYWN0b3J5UHJvcGVydHlEZXNjcmlwdG9yczoge1xuICAgIHZhbHVlOiB0cnVlXG4gIH0sXG4gIHVpRmFjdG9yeUF0dHJpYnV0ZXM6IHtcbiAgICB3cml0YWJsZTogdHJ1ZVxuICB9LFxuICB1aUZhY3RvcnlDaGlsZEVsZW1lbnRzOiB7XG4gICAgd3JpdGFibGU6IHRydWVcbiAgfSxcbiAgcmVuZGVyOiB7XG4gICAgdmFsdWU6IGZ1bmN0aW9uIHZhbHVlKGNhbGxiYWNrKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICB2YXIgY2hhaW5SZW5kZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHRydWU7XG5cbiAgICAgIHZhciByZW5kZXJBdHRyaWJ1dGVzID0gZnVuY3Rpb24gcmVuZGVyQXR0cmlidXRlcyhhdHRyaWJ1dGVzLCBrZXksIHNvdXJjZSkge1xuICAgICAgICBpZiAoYXR0cmlidXRlcyA9PSBudWxsKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGF0dHJpYnV0ZXMgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgcmV0dXJuIGF0dHJpYnV0ZXMudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiByZW5kZXJBdHRyaWJ1dGVzKHZhbHVlLCBrZXksIHNvdXJjZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIGF0dHJpYnV0ZXMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICByZXR1cm4gcmVuZGVyQXR0cmlidXRlcyhhdHRyaWJ1dGVzKF90aGlzKSwga2V5LCBzb3VyY2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXR0cmlidXRlcykpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoYXR0cmlidXRlcy5tYXAoZnVuY3Rpb24gKGF0dHJpYnV0ZSwgaW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybiByZW5kZXJBdHRyaWJ1dGVzKGF0dHJpYnV0ZSwgaW5kZXgsIGF0dHJpYnV0ZXMpO1xuICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChfdHlwZW9mKGF0dHJpYnV0ZXMpID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgX3RoaXMucmVtb3ZlQXR0cmlidXRlKGtleSk7XG5cbiAgICAgICAgICAgIHJldHVybiByZW5kZXJBdHRyaWJ1dGVzKGF0dHJpYnV0ZXNba2V5XSwga2V5LCBhdHRyaWJ1dGVzKTtcbiAgICAgICAgICB9KSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoa2V5KSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBzb3VyY2Vba2V5XSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgZGVsZXRlIHNvdXJjZVtrZXldO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIF90aGlzLnNldEF0dHJpYnV0ZShrZXksIGF0dHJpYnV0ZXMpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICB2YXIgcmVuZGVyQ2hpbGRFbGVtZW50cyA9IGZ1bmN0aW9uIHJlbmRlckNoaWxkRWxlbWVudHMoY2hpbGRFbGVtZW50cywgcGxhY2Vob2xkZXIsIHNvdXJjZSwga2V5KSB7XG4gICAgICAgIHBsYWNlaG9sZGVyID0gcGxhY2Vob2xkZXIgfHwgX3RoaXMuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJycpKTtcblxuICAgICAgICBpZiAoY2hpbGRFbGVtZW50cyA9PSBudWxsKSB7XG4gICAgICAgICAgX3RoaXMucmVtb3ZlQ2hpbGQocGxhY2Vob2xkZXIpO1xuXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNoaWxkRWxlbWVudHMgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgcmV0dXJuIGNoaWxkRWxlbWVudHMudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiByZW5kZXJDaGlsZEVsZW1lbnRzKHZhbHVlLCBwbGFjZWhvbGRlciwgc291cmNlLCBrZXkpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiBjaGlsZEVsZW1lbnRzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgcmV0dXJuIHJlbmRlckNoaWxkRWxlbWVudHMoY2hpbGRFbGVtZW50cyhfdGhpcyksIHBsYWNlaG9sZGVyLCBzb3VyY2UsIGtleSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShjaGlsZEVsZW1lbnRzKSkge1xuICAgICAgICAgIHZhciByZXR1cm5WYWx1ZSA9IFByb21pc2UuYWxsKGNoaWxkRWxlbWVudHMubWFwKGZ1bmN0aW9uIChjaGlsZEVsZW1lbnQsIGluZGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gcmVuZGVyQ2hpbGRFbGVtZW50cyhjaGlsZEVsZW1lbnQsIF90aGlzLmluc2VydEJlZm9yZShkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnJyksIHBsYWNlaG9sZGVyKSwgY2hpbGRFbGVtZW50cywgaW5kZXgpO1xuICAgICAgICAgIH0pKTtcblxuICAgICAgICAgIF90aGlzLnJlbW92ZUNoaWxkKHBsYWNlaG9sZGVyKTtcblxuICAgICAgICAgIHJldHVybiByZXR1cm5WYWx1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjaGlsZEVsZW1lbnRzIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgfHwgY2hpbGRFbGVtZW50cyBpbnN0YW5jZW9mIFRleHQgfHwgY2hpbGRFbGVtZW50cyBpbnN0YW5jZW9mIFNWR0VsZW1lbnQpIHtcbiAgICAgICAgICBfdGhpcy5pbnNlcnRCZWZvcmUoY2hpbGRFbGVtZW50cywgcGxhY2Vob2xkZXIpO1xuXG4gICAgICAgICAgX3RoaXMucmVtb3ZlQ2hpbGQocGxhY2Vob2xkZXIpO1xuXG4gICAgICAgICAgaWYgKGNoYWluUmVuZGVyICYmIGNoaWxkRWxlbWVudHMuZGVmaW5lZEJ5VWlGYWN0b3J5UHJvcGVydHlEZXNjcmlwdG9ycykge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgICAgICAgIGNoaWxkRWxlbWVudHMucmVuZGVyKHJlc29sdmUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoX3R5cGVvZihjaGlsZEVsZW1lbnRzKSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICB2YXIgX3JldHVyblZhbHVlID0gUHJvbWlzZS5hbGwoT2JqZWN0LmtleXMoY2hpbGRFbGVtZW50cykubWFwKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIHJldHVybiByZW5kZXJDaGlsZEVsZW1lbnRzKGNoaWxkRWxlbWVudHNba2V5XSwgX3RoaXMuaW5zZXJ0QmVmb3JlKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcnKSwgcGxhY2Vob2xkZXIpLCBjaGlsZEVsZW1lbnRzLCBrZXkpO1xuICAgICAgICAgIH0pKTtcblxuICAgICAgICAgIF90aGlzLnJlbW92ZUNoaWxkKHBsYWNlaG9sZGVyKTtcblxuICAgICAgICAgIHJldHVybiBfcmV0dXJuVmFsdWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIGNoaWxkRWxlbWVudHMgPT09ICdib29sZWFuJyB8fCB0eXBlb2YgY2hpbGRFbGVtZW50cyA9PT0gJ251bWJlcicgfHwgdHlwZW9mIGNoaWxkRWxlbWVudHMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgY2hpbGRFbGVtZW50cyA9IHVpRmFjdG9yeS5zdHJpbmdUb0h0bWwoY2hpbGRFbGVtZW50cyk7XG5cbiAgICAgICAgICBpZiAoc291cmNlICYmIGtleSAmJiB0eXBlb2Ygc291cmNlW2tleV0gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHNvdXJjZVtrZXldID0gY2hpbGRFbGVtZW50cztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gcmVuZGVyQ2hpbGRFbGVtZW50cyhjaGlsZEVsZW1lbnRzLCBwbGFjZWhvbGRlciwgc291cmNlLCBrZXkpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICB2YXIgcHJlbmRlckNoaWxkRWxlbWVudHMgPSBmdW5jdGlvbiBwcmVuZGVyQ2hpbGRFbGVtZW50cyhjaGlsZEVsZW1lbnRzKSB7XG4gICAgICAgIHdoaWxlIChfdGhpcy5maXJzdENoaWxkKSB7XG4gICAgICAgICAgX3RoaXMucmVtb3ZlQ2hpbGQoX3RoaXMuZmlyc3RDaGlsZCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVuZGVyQ2hpbGRFbGVtZW50cyhjaGlsZEVsZW1lbnRzKTtcbiAgICAgIH07XG5cbiAgICAgIFByb21pc2UuYWxsKFtyZW5kZXJBdHRyaWJ1dGVzKHRoaXMudWlGYWN0b3J5QXR0cmlidXRlcyksIHByZW5kZXJDaGlsZEVsZW1lbnRzKHRoaXMudWlGYWN0b3J5Q2hpbGRFbGVtZW50cyldKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgY2FsbGJhY2soX3RoaXMpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgfVxufTtcbi8qKlxuICogQ3JlYXRlIGNoaWxkIGVsZW1lbnRzIGZvciB1aUZhY3RvcnkuXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyXG4gKiBAcmV0dXJucyB7W0hUTUxFbGVtZW50fFRleHRdfVxuICovXG5cbnVpRmFjdG9yeS5zdHJpbmdUb0h0bWwgPSBmdW5jdGlvbiAoc3RyKSB7XG4gIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGVsZW1lbnQuaW5uZXJIVE1MID0gc3RyO1xuICByZXR1cm4gX3RvQ29uc3VtYWJsZUFycmF5KGVsZW1lbnQuY2hpbGROb2RlcykubWFwKGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgaWYgKGVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xuICAgICAgcmV0dXJuIHVpRmFjdG9yeShlbGVtZW50KTtcbiAgICB9XG5cbiAgICByZXR1cm4gZWxlbWVudDtcbiAgfSk7XG59O1xuXG51aUZhY3RvcnkuYXJyYXlUb1N0cmluZyA9IGZ1bmN0aW9uIChhcnIpIHtcbiAgdmFyIGpvaW5lciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogJyAnO1xuXG4gIGlmICghQXJyYXkuaXNBcnJheShhcnIpKSB7XG4gICAgYXJyID0gW2Fycl07XG4gIH1cblxuICByZXR1cm4gYXJyLmZpbHRlcihmdW5jdGlvbiAodmFsKSB7XG4gICAgcmV0dXJuIHZhbCAhPSBudWxsO1xuICB9KS5qb2luKGpvaW5lcik7XG59O1xuXG51aUZhY3Rvcnkud2hlbiA9IGZ1bmN0aW9uIChjb25kaXRpb24sIHRydWVWYWx1ZSwgZmFsc2VWYWx1ZSkge1xuICBpZiAodHlwZW9mIGNvbmRpdGlvbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNvbmRpdGlvbiA9IGNvbmRpdGlvbigpO1xuICB9XG5cbiAgaWYgKGNvbmRpdGlvbikge1xuICAgIGlmICh0eXBlb2YgdHJ1ZVZhbHVlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0cnVlVmFsdWUgPSB0cnVlVmFsdWUoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZVZhbHVlO1xuICB9IGVsc2Uge1xuICAgIGlmICh0eXBlb2YgZmFsc2VWYWx1ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgZmFsc2VWYWx1ZSA9IGZhbHNlVmFsdWUoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2VWYWx1ZTtcbiAgfVxufTtcblxudWlGYWN0b3J5LmV4ZWMgPSBmdW5jdGlvbiAoZnVuYykge1xuICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgYXJnc1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07XG4gIH1cblxuICByZXR1cm4gZnVuYy5hcHBseSh2b2lkIDAsIGFyZ3MpO1xufTtcblxuWydhJywgJ2FiYnInLCAnYWRkcmVzcycsICdhcmVhJywgJ2FydGljbGUnLCAnYXNpZGUnLCAnYXVkaW8nLCAnYicsICdiYXNlJywgJ2JkaScsICdiZG8nLCAnYmxvY2txdW90ZScsICdib2R5JywgJ2JyJywgJ2J1dHRvbicsICdjYW52YXMnLCAnY2FwdGlvbicsICdjaXRlJywgJ2NvZGUnLCAnY29sJywgJ2NvbGdyb3VwJywgJ2RhdGEnLCAnZGF0YWxpc3QnLCAnZGQnLCAnZGVsJywgJ2RldGFpbHMnLCAnZGZuJywgJ2RpYWxvZycsICdkaXYnLCAnZGwnLCAnZHQnLCAnZW0nLCAnZW1iZWQnLCAnZmllbGRzZXQnLCAnZmlndXJlJywgJ2Zvb3RlcicsICdmb3JtJywgJ2gxJywgJ2gyJywgJ2gzJywgJ2g0JywgJ2g1JywgJ2g2JywgJ2hlYWQnLCAnaGVhZGVyJywgJ2hncm91cCcsICdocicsICdodG1sJywgJ2knLCAnaWZyYW1lJywgJ2ltZycsICdpbnB1dCcsICdpbnMnLCAna2JkJywgJ2tleWdlbicsICdsYWJlbCcsICdsZWdlbmQnLCAnbGknLCAnbGluaycsICdtYWluJywgJ21hcCcsICdtYXJrJywgJ21lbnUnLCAnbWVudWl0ZW0nLCAnbWV0YScsICdtZXRlcicsICduYXYnLCAnbm9zY3JpcHQnLCAnb2JqZWN0JywgJ29sJywgJ29wdGdyb3VwJywgJ29wdGlvbicsICdvdXRwdXQnLCAncCcsICdwYXJhbScsICdwcmUnLCAncHJvZ3Jlc3MnLCAncScsICdyYicsICdycCcsICdydCcsICdydGMnLCAncnVieScsICdzJywgJ3NhbXAnLCAnc2NyaXB0JywgJ3NlY3Rpb24nLCAnc2VsZWN0JywgJ3NtYWxsJywgJ3NvdXJjZScsICdzcGFuJywgJ3N0cm9uZycsICdzdHlsZScsICdzdWInLCAnc3VtbWFyeScsICdzdXAnLCAndGFibGUnLCAndGJvZHknLCAndGQnLCAndGVtcGxhdGUnLCAndGV4dGFyZWEnLCAndGZvb3QnLCAndGgnLCAndGhlYWQnLCAndGltZScsICd0aXRsZScsICd0cicsICd0cmFjaycsICd1JywgJ3VsJywgJ3ZhcicsICd2aWRlbycsICd3YnInXS5mb3JFYWNoKGZ1bmN0aW9uICh0YWcpIHtcbiAgdWlGYWN0b3J5W3RhZ10gPSBmdW5jdGlvbiAoYXR0cmlidXRlcywgY2hpbGRFbGVtZW50cywgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gdWlGYWN0b3J5KHRhZywgYXR0cmlidXRlcywgY2hpbGRFbGVtZW50cywgY2FsbGJhY2spO1xuICB9O1xufSk7XG5cbnVpRmFjdG9yeS5zdmcgPSBmdW5jdGlvbiAoZWxlbWVudCwgYXR0cmlidXRlcywgY2hpbGRFbGVtZW50cywgY2FsbGJhY2spIHtcbiAgaWYgKHR5cGVvZiBlbGVtZW50ID09PSAnc3RyaW5nJykge1xuICAgIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgZWxlbWVudCk7XG4gIH1cblxuICByZXR1cm4gdWlGYWN0b3J5KGVsZW1lbnQsIGF0dHJpYnV0ZXMsIGNoaWxkRWxlbWVudHMsIGNhbGxiYWNrKTtcbn07XG5cblsnYScsICdhbmltYXRlJywgJ2FuaW1hdGVNb3Rpb24nLCAnYW5pbWF0ZVRyYW5zZm9ybScsICdjaXJjbGUnLCAnY2xpcFBhdGgnLCAnY29sb3ItcHJvZmlsZScsICdkZWZzJywgJ2Rlc2MnLCAnZGlzY2FyZCcsICdlbGxpcHNlJywgJ2ZlQmxlbmQnLCAnZmVDb2xvck1hdHJpeCcsICdmZUNvbXBvbmVudFRyYW5zZmVyJywgJ2ZlQ29tcG9zaXRlJywgJ2ZlQ29udm9sdmVNYXRyaXgnLCAnZmVEaWZmdXNlTGlnaHRpbmcnLCAnZmVEaXNwbGFjZW1lbnRNYXAnLCAnZmVEaXN0YW50TGlnaHQnLCAnZmVEcm9wU2hhZG93JywgJ2ZlRmxvb2QnLCAnZmVGdW5jQScsICdmZUZ1bmNCJywgJ2ZlRnVuY0cnLCAnZmVGdW5jUicsICdmZUdhdXNzaWFuQmx1cicsICdmZUltYWdlJywgJ2ZlTWVyZ2UnLCAnZmVNZXJnZU5vZGUnLCAnZmVNb3JwaG9sb2d5JywgJ2ZlT2Zmc2V0JywgJ2ZlUG9pbnRMaWdodCcsICdmZVNwZWN1bGFyTGlnaHRpbmcnLCAnZmVTcG90TGlnaHQnLCAnZmVUaWxlJywgJ2ZlVHVyYnVsZW5jZScsICdmaWx0ZXInLCAnZm9yZWlnbk9iamVjdCcsICdnJywgJ2hhdGNoJywgJ2hhdGNocGF0aCcsICdpbWFnZScsICdsaW5lJywgJ2xpbmVhckdyYWRpZW50JywgJ21hcmtlcicsICdtYXNrJywgJ21lc2gnLCAnbWVzaGdyYWRpZW50JywgJ21lc2hwYXRjaCcsICdtZXNocm93JywgJ21ldGFkYXRhJywgJ21wYXRoJywgJ3BhdGgnLCAncGF0dGVybicsICdwb2x5Z29uJywgJ3BvbHlsaW5lJywgJ3JhZGlhbEdyYWRpZW50JywgJ3JlY3QnLCAnc2NyaXB0JywgJ3NldCcsICdzb2xpZGNvbG9yJywgJ3N0b3AnLCAnc3R5bGUnLCAnc3ZnJywgJ3N3aXRjaCcsICdzeW1ib2wnLCAndGV4dCcsICd0ZXh0UGF0aCcsICd0aXRsZScsICd0c3BhbicsICd1bmtub3duJywgJ3VzZScsICd2aWV3J10uZm9yRWFjaChmdW5jdGlvbiAodGFnKSB7XG4gIHVpRmFjdG9yeS5zdmdbdGFnXSA9IGZ1bmN0aW9uIChhdHRyaWJ1dGVzLCBjaGlsZEVsZW1lbnRzLCBjYWxsYmFjaykge1xuICAgIHJldHVybiB1aUZhY3Rvcnkuc3ZnKHRhZywgYXR0cmlidXRlcywgY2hpbGRFbGVtZW50cywgY2FsbGJhY2spO1xuICB9O1xufSk7XG4vKiogQ29udmVuaWVjZSBPYmplY3QgKi9cblxuaWYgKCF3aW5kb3cudWlmKSB7XG4gIHdpbmRvdy51aWYgPSB1aUZhY3Rvcnk7XG59Il19
