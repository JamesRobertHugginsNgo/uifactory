"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var uiFactoryPropertyDescriptors={definedByUiFactoryPropertyDescriptors:{value:!0},callback:{value:function(e){return"function"==typeof e&&e(this),this},writable:!0},events:{value:function(i,e){var t=this;if(i&&"object"===_typeof(i)){var r=function(o){Object.prototype.hasOwnProperty.call(i,o)&&"function"==typeof i[o]&&t.addEventListener(o,function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];(e=i[o]).call.apply(e,[this].concat(r,[this]))})};for(var n in i)r(n)}return"function"==typeof e&&e(this),this},writable:!0},_properties:{writable:!0},properties:{value:function(e,t){var s=this,r=0<arguments.length&&void 0!==e?e:this._properties,n=1<arguments.length?t:void 0;this._properties=r;var o=function r(t,n,e){if(t instanceof Promise)return t.then(function(e){return r(e,n)});if("function"==typeof t)return r(t.call(s,s),n);if(Array.isArray(t)){var o={},i=t.map(function(e,t){return o[t]=!0,r(e,t,o)}).filter(function(e){return e instanceof Promise});if(e&&n&&0===Object.keys(o).length&&delete e[n],0<i.length)return Promise.all(i)}if("object"===_typeof(t)&&null!==t){var a=Object.keys(t).map(function(e){return r(t[e],e,t)}).filter(function(e){return e instanceof Promise});if(e&&n&&0===Object.keys(t).length&&delete e[n],0<a.length)return Promise.all(a)}n&&(null==t?s.removeAttribute(n):s.setAttribute(n,t),e&&delete e[n])}(this._properties);return"function"==typeof n&&(o instanceof Promise?o.then(function(){n(s)}):n(this)),this},writable:!0},_contents:{writable:!0},contents:{value:function(e,t,r){var s=this,c=2<arguments.length&&void 0!==r&&r;for(this._contents=e;this.firstChild;)this.removeChild(this.firstChild);var n=function t(r,e){var n=1<arguments.length&&void 0!==e?e:s.appendChild(document.createTextNode(""));if(r instanceof Promise)return r.then(function(e){return t(e,n)});if("function"==typeof r)return t(r(s),n);if(Array.isArray(r)){var o=r.map(function(e){return t(e,s.insertBefore(document.createTextNode(""),n))}).filter(function(e){return e instanceof Promise});return s.removeChild(n),0<o.length&&Promise.all(o)}if(!("object"!==_typeof(r)||null===r||r instanceof Element||r instanceof Text)){var i=Object.keys(r).map(function(e){return t(r[e],s.insertBefore(document.createTextNode(""),n))}).filter(function(e){return e instanceof Promise});return s.removeChild(n),0<i.length&&Promise.all(i)}if("boolean"!=typeof r&&"number"!=typeof r&&"string"!=typeof r)return(r instanceof Element||r instanceof Text)&&s.insertBefore(r,n),s.removeChild(n),r instanceof Element&&r.definedByUiFactoryPropertyDescriptors&&c?r.render():void 0;var a=document.createElement("div");return a.innerHTML=String(r),t(_toConsumableArray(a.childNodes),n)}(this._contents);return"function"==typeof t&&(n instanceof Promise?n.then(function(){t(s)}):t(this)),this},writable:!0},render:{value:function(e){var t=this,r=[new Promise(function(e){return t.properties(t._properties,e)}),new Promise(function(e){return t.contents(t._contents,e,!0)})];return"function"==typeof e&&Promise.all(r).then(function(){e(t)}),this},writable:!0}};function uiFactory(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if("string"==typeof r[0]&&"string"==typeof r[1]){var o=r[0],i=r[1],a=r[2];e=document.createElementNS(o,i,a)}else if("string"==typeof r[0]){var s=r[0],c=r[1];e=document.createElement(s,c)}else r[0]instanceof Element&&(e=r[0]);e instanceof Element&&(e.definedByUiFactoryPropertyDescriptors||(e=Object.defineProperties(e,uiFactoryPropertyDescriptors)),0<e.childNodes.length&&e.contents.apply(e,_toConsumableArray(e.childNodes)));return e}["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"].forEach(function(t){return uiFactory[t]=function(e){return uiFactory(t).callback(e)}}),uiFactory.svg=function(){return uif("http://www.w3.org/2000/svg","svg")},["a","animate","animateMotion","animateTransform","circle","clipPath","color-profile","defs","desc","discard","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","foreignObject","g","hatch","hatchpath","image","line","linearGradient","marker","mask","mesh","meshgradient","meshpatch","meshrow","metadata","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","solidcolor","stop","style","switch","symbol","text","textPath","title","tspan","unknown","use","view"].forEach(function(t){return uiFactory.svg[t]=function(e){return uiFactory("http://www.w3.org/2000/svg",t).callback(e)}});var uif=uif||uiFactory;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVpZmFjdG9yeS5qcyJdLCJuYW1lcyI6WyJfdG9Db25zdW1hYmxlQXJyYXkiLCJhcnIiLCJfYXJyYXlXaXRob3V0SG9sZXMiLCJfaXRlcmFibGVUb0FycmF5IiwiX25vbkl0ZXJhYmxlU3ByZWFkIiwiVHlwZUVycm9yIiwiaXRlciIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiT2JqZWN0IiwicHJvdG90eXBlIiwidG9TdHJpbmciLCJjYWxsIiwiQXJyYXkiLCJmcm9tIiwiaXNBcnJheSIsImkiLCJhcnIyIiwibGVuZ3RoIiwiX3R5cGVvZiIsIm9iaiIsImNvbnN0cnVjdG9yIiwidWlGYWN0b3J5UHJvcGVydHlEZXNjcmlwdG9ycyIsImRlZmluZWRCeVVpRmFjdG9yeVByb3BlcnR5RGVzY3JpcHRvcnMiLCJ2YWx1ZSIsImNhbGxiYWNrIiwidGhpcyIsIndyaXRhYmxlIiwiZXZlbnRzIiwiX3RoaXMiLCJfbG9vcCIsInR5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImFkZEV2ZW50TGlzdGVuZXIiLCJfZXZlbnRzJHR5cGUiLCJfbGVuIiwiYXJndW1lbnRzIiwiYXJncyIsIl9rZXkiLCJhcHBseSIsImNvbmNhdCIsIl9wcm9wZXJ0aWVzIiwicHJvcGVydGllcyIsIl90aGlzMiIsInVuZGVmaW5lZCIsInJlc3VsdCIsInJlbmRlciIsInByb3BlcnR5VmFsdWUiLCJwcm9wZXJ0eU5hbWUiLCJQcm9taXNlIiwidGhlbiIsInRlbXBQcm9wZXJ0aWVzIiwicHJvbWlzZXMiLCJtYXAiLCJpbmRleCIsImZpbHRlciIsInByb21pc2UiLCJrZXlzIiwiYWxsIiwiX3Byb21pc2VzIiwia2V5IiwicmVtb3ZlQXR0cmlidXRlIiwic2V0QXR0cmlidXRlIiwiX2NvbnRlbnRzIiwiY29udGVudHMiLCJfdGhpczMiLCJjYWxsUmVuZGVyT25jb250ZW50cyIsImZpcnN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsIml0ZW0iLCJwbGFjZWhvbGRlciIsImFwcGVuZENoaWxkIiwiZG9jdW1lbnQiLCJjcmVhdGVUZXh0Tm9kZSIsImluc2VydEJlZm9yZSIsIkVsZW1lbnQiLCJUZXh0IiwiX3Byb21pc2VzMiIsIndyYXBwZXIiLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJIVE1MIiwiU3RyaW5nIiwiY2hpbGROb2RlcyIsIl90aGlzNCIsInJlc29sdmUiLCJ1aUZhY3RvcnkiLCJlbGVtZW50IiwiX2xlbjIiLCJfa2V5MiIsIm5hbWVzcGFjZVVSSSIsInF1YWxpZmllZE5hbWUiLCJvcHRpb25zIiwiY3JlYXRlRWxlbWVudE5TIiwidGFnTmFtZSIsIl9vcHRpb25zIiwiZGVmaW5lUHJvcGVydGllcyIsImZvckVhY2giLCJ0YWciLCJzdmciLCJ1aWYiXSwibWFwcGluZ3MiOiJBQUFBLGFBRUEsU0FBU0EsbUJBQW1CQyxHQUFPLE9BQU9DLG1CQUFtQkQsSUFBUUUsaUJBQWlCRixJQUFRRyxxQkFFOUYsU0FBU0EscUJBQXVCLE1BQU0sSUFBSUMsVUFBVSxtREFFcEQsU0FBU0YsaUJBQWlCRyxHQUFRLEdBQUlDLE9BQU9DLFlBQVlDLE9BQU9ILElBQWtELHVCQUF6Q0csT0FBT0MsVUFBVUMsU0FBU0MsS0FBS04sR0FBZ0MsT0FBT08sTUFBTUMsS0FBS1IsR0FFMUosU0FBU0osbUJBQW1CRCxHQUFPLEdBQUlZLE1BQU1FLFFBQVFkLEdBQU0sQ0FBRSxJQUFLLElBQUllLEVBQUksRUFBR0MsRUFBTyxJQUFJSixNQUFNWixFQUFJaUIsUUFBU0YsRUFBSWYsRUFBSWlCLE9BQVFGLElBQU9DLEVBQUtELEdBQUtmLEVBQUllLEdBQU0sT0FBT0MsR0FFN0osU0FBU0UsUUFBUUMsR0FBbVYsT0FBdE9ELFFBQXJELG1CQUFYWixRQUFvRCxpQkFBcEJBLE9BQU9DLFNBQW1DLFNBQWlCWSxHQUFPLGNBQWNBLEdBQTJCLFNBQWlCQSxHQUFPLE9BQU9BLEdBQXlCLG1CQUFYYixRQUF5QmEsRUFBSUMsY0FBZ0JkLFFBQVVhLElBQVFiLE9BQU9HLFVBQVksZ0JBQWtCVSxJQUF5QkEsR0FHblgsSUFBSUUsNkJBQStCLENBQ2pDQyxzQ0FBdUMsQ0FDckNDLE9BQU8sR0FHVEMsU0FBVSxDQUNSRCxNQUFPLFNBQWVDLEdBT3BCLE1BTHdCLG1CQUFiQSxHQUNUQSxFQUFTQyxNQUlKQSxNQUVUQyxVQUFVLEdBR1pDLE9BQVEsQ0FDTkosTUFBTyxTQUFlSSxFQUFRSCxHQUM1QixJQUFJSSxFQUFRSCxLQUVaLEdBQUlFLEdBQThCLFdBQXBCVCxRQUFRUyxHQUFzQixDQUMxQyxJQUFJRSxFQUFRLFNBQWVDLEdBQ3JCdEIsT0FBT0MsVUFBVXNCLGVBQWVwQixLQUFLZ0IsRUFBUUcsSUFBaUMsbUJBQWpCSCxFQUFPRyxJQUN0RUYsRUFBTUksaUJBQWlCRixFQUFNLFdBRzNCLElBRkEsSUFBSUcsRUFFS0MsRUFBT0MsVUFBVWxCLE9BQVFtQixFQUFPLElBQUl4QixNQUFNc0IsR0FBT0csRUFBTyxFQUFHQSxFQUFPSCxFQUFNRyxJQUMvRUQsRUFBS0MsR0FBUUYsVUFBVUUsSUFHeEJKLEVBQWVOLEVBQU9HLElBQU9uQixLQUFLMkIsTUFBTUwsRUFBYyxDQUFDUixNQUFNYyxPQUFPSCxFQUFNLENBQUNYLFdBS2xGLElBQUssSUFBSUssS0FBUUgsRUFDZkUsRUFBTUMsR0FTVixNQUx3QixtQkFBYk4sR0FDVEEsRUFBU0MsTUFJSkEsTUFFVEMsVUFBVSxHQUdaYyxZQUFhLENBQ1hkLFVBQVUsR0FFWmUsV0FBWSxDQUNWbEIsTUFBTyxTQUFBLEVBQUEsR0FDTCxJQUFJbUIsRUFBU2pCLEtBRVRnQixFQUFnQyxFQUFuQk4sVUFBVWxCLGFBQStCMEIsSUFIckQsRUFBQSxFQUdnRmxCLEtBQUtlLFlBQ3RGaEIsRUFBOEIsRUFBbkJXLFVBQVVsQixPQUpwQixPQUlnRDBCLEVBQ3JEbEIsS0FBS2UsWUFBY0MsRUFFbkIsSUErRElHLEVBL0RTLFNBQVNDLEVBQU9DLEVBQWVDLEVBQWNOLEdBRXhELEdBQUlLLGFBQXlCRSxRQUMzQixPQUFPRixFQUFjRyxLQUFLLFNBQVUxQixHQUNsQyxPQUFPc0IsRUFBT3RCLEVBQU93QixLQUt6QixHQUE2QixtQkFBbEJELEVBQ1QsT0FBT0QsRUFBT0MsRUFBY25DLEtBQUsrQixFQUFRQSxHQUFTSyxHQUlwRCxHQUFJbkMsTUFBTUUsUUFBUWdDLEdBQWdCLENBQ2hDLElBQUlJLEVBQWlCLEdBQ2pCQyxFQUFXTCxFQUFjTSxJQUFJLFNBQVU3QixFQUFPOEIsR0FFaEQsT0FEQUgsRUFBZUcsSUFBUyxFQUNqQlIsRUFBT3RCLEVBQU84QixFQUFPSCxLQUMzQkksT0FBTyxTQUFVQyxHQUNsQixPQUFPQSxhQUFtQlAsVUFPNUIsR0FKSVAsR0FBY00sR0FBdUQsSUFBdkN2QyxPQUFPZ0QsS0FBS04sR0FBZ0JqQyxlQUNyRHdCLEVBQVdNLEdBR0UsRUFBbEJJLEVBQVNsQyxPQUNYLE9BQU8rQixRQUFRUyxJQUFJTixHQUt2QixHQUErQixXQUEzQmpDLFFBQVE0QixJQUFpRCxPQUFsQkEsRUFBd0IsQ0FDakUsSUFBSVksRUFBWWxELE9BQU9nRCxLQUFLVixHQUFlTSxJQUFJLFNBQVVPLEdBQ3ZELE9BQU9kLEVBQU9DLEVBQWNhLEdBQU1BLEVBQUtiLEtBQ3RDUSxPQUFPLFNBQVVDLEdBQ2xCLE9BQU9BLGFBQW1CUCxVQU81QixHQUpJUCxHQUFjTSxHQUFzRCxJQUF0Q3ZDLE9BQU9nRCxLQUFLVixHQUFlN0IsZUFDcER3QixFQUFXTSxHQUdHLEVBQW5CVyxFQUFVekMsT0FDWixPQUFPK0IsUUFBUVMsSUFBSUMsR0FLbkJYLElBQ21CLE1BQWpCRCxFQUNGSixFQUFPa0IsZ0JBQWdCYixHQUV2QkwsRUFBT21CLGFBQWFkLEVBQWNELEdBR2hDTCxVQUNLQSxFQUFXTSxJQUtYRixDQUFPcEIsS0FBS2UsYUFhekIsTUFYd0IsbUJBQWJoQixJQUNMb0IsYUFBa0JJLFFBQ3BCSixFQUFPSyxLQUFLLFdBQ1Z6QixFQUFTa0IsS0FHWGxCLEVBQVNDLE9BS05BLE1BRVRDLFVBQVUsR0FHWm9DLFVBQVcsQ0FDVHBDLFVBQVUsR0FFWnFDLFNBQVUsQ0FDUnhDLE1BQU8sU0FBZXdDLEVBQVV2QyxFQUF6QixHQUNMLElBQUl3QyxFQUFTdkMsS0FFVHdDLEVBQTBDLEVBQW5COUIsVUFBVWxCLGFBQStCMEIsSUFIL0QsR0FBQSxFQU1MLElBRkFsQixLQUFLcUMsVUFBWUMsRUFFVnRDLEtBQUt5QyxZQUNWekMsS0FBSzBDLFlBQVkxQyxLQUFLeUMsWUFJeEIsSUE4REl0QixFQTlEUyxTQUFTQyxFQUFPdUIsRUFBaEIsR0FDWCxJQUFJQyxFQUFpQyxFQUFuQmxDLFVBQVVsQixhQUErQjBCLElBRGhELEVBQUEsRUFDMkVxQixFQUFPTSxZQUFZQyxTQUFTQyxlQUFlLEtBR2pJLEdBQUlKLGFBQWdCcEIsUUFDbEIsT0FBT29CLEVBQUtuQixLQUFLLFNBQVUxQixHQUN6QixPQUFPc0IsRUFBT3RCLEVBQU84QyxLQUt6QixHQUFvQixtQkFBVEQsRUFDVCxPQUFPdkIsRUFBT3VCLEVBQUtKLEdBQVNLLEdBSTlCLEdBQUl6RCxNQUFNRSxRQUFRc0QsR0FBTyxDQUN2QixJQUFJakIsRUFBV2lCLEVBQUtoQixJQUFJLFNBQVU3QixHQUNoQyxPQUFPc0IsRUFBT3RCLEVBQU95QyxFQUFPUyxhQUFhRixTQUFTQyxlQUFlLElBQUtILE1BQ3JFZixPQUFPLFNBQVVDLEdBQ2xCLE9BQU9BLGFBQW1CUCxVQUs1QixPQUZBZ0IsRUFBT0csWUFBWUUsR0FFTSxFQUFsQmxCLEVBQVNsQyxRQUFjK0IsUUFBUVMsSUFBSU4sR0FJNUMsS0FBc0IsV0FBbEJqQyxRQUFRa0QsSUFBK0IsT0FBVEEsR0FBbUJBLGFBQWdCTSxTQUFjTixhQUFnQk8sTUFBTyxDQUN4RyxJQUFJQyxFQUFhcEUsT0FBT2dELEtBQUtZLEdBQU1oQixJQUFJLFNBQVVPLEdBQy9DLE9BQU9kLEVBQU91QixFQUFLVCxHQUFNSyxFQUFPUyxhQUFhRixTQUFTQyxlQUFlLElBQUtILE1BQ3pFZixPQUFPLFNBQVVDLEdBQ2xCLE9BQU9BLGFBQW1CUCxVQUs1QixPQUZBZ0IsRUFBT0csWUFBWUUsR0FFUSxFQUFwQk8sRUFBVzNELFFBQWMrQixRQUFRUyxJQUFJbUIsR0FJOUMsR0FBb0Isa0JBQVRSLEdBQXNDLGlCQUFUQSxHQUFxQyxpQkFBVEEsRUFlcEUsT0FSSUEsYUFBZ0JNLFNBQVdOLGFBQWdCTyxPQUM3Q1gsRUFBT1MsYUFBYUwsRUFBTUMsR0FJNUJMLEVBQU9HLFlBQVlFLEdBR2ZELGFBQWdCTSxTQUFXTixFQUFLOUMsdUNBQXlDMkMsRUFDcEVHLEVBQUt2QixjQURkLEVBZEUsSUFBSWdDLEVBQVVOLFNBQVNPLGNBQWMsT0FFckMsT0FEQUQsRUFBUUUsVUFBWUMsT0FBT1osR0FDcEJ2QixFQUFPOUMsbUJBQW1COEUsRUFBUUksWUFBYVosR0FpQjdDeEIsQ0FBT3BCLEtBQUtxQyxXQWF6QixNQVh3QixtQkFBYnRDLElBQ0xvQixhQUFrQkksUUFDcEJKLEVBQU9LLEtBQUssV0FDVnpCLEVBQVN3QyxLQUdYeEMsRUFBU0MsT0FLTkEsTUFFVEMsVUFBVSxHQUdabUIsT0FBUSxDQUNOdEIsTUFBTyxTQUFlQyxHQUNwQixJQUFJMEQsRUFBU3pELEtBRVQwQixFQUFXLENBQUMsSUFBSUgsUUFBUSxTQUFVbUMsR0FDcEMsT0FBT0QsRUFBT3pDLFdBQVd5QyxFQUFPMUMsWUFBYTJDLEtBQzNDLElBQUluQyxRQUFRLFNBQVVtQyxHQUN4QixPQUFPRCxFQUFPbkIsU0FBU21CLEVBQU9wQixVQUFXcUIsR0FBUyxNQVVwRCxNQVB3QixtQkFBYjNELEdBQ1R3QixRQUFRUyxJQUFJTixHQUFVRixLQUFLLFdBQ3pCekIsRUFBUzBELEtBS056RCxNQUVUQyxVQUFVLElBS2QsU0FBUzBELFlBR1AsSUFGQSxJQUFJQyxFQUVLQyxFQUFRbkQsVUFBVWxCLE9BQVFtQixFQUFPLElBQUl4QixNQUFNMEUsR0FBUUMsRUFBUSxFQUFHQSxFQUFRRCxFQUFPQyxJQUNwRm5ELEVBQUttRCxHQUFTcEQsVUFBVW9ELEdBRzFCLEdBQXVCLGlCQUFabkQsRUFBSyxJQUFzQyxpQkFBWkEsRUFBSyxHQUFpQixDQUM5RCxJQUFJb0QsRUFBZXBELEVBQUssR0FDcEJxRCxFQUFnQnJELEVBQUssR0FDckJzRCxFQUFVdEQsRUFBSyxHQUNuQmlELEVBQVVkLFNBQVNvQixnQkFBZ0JILEVBQWNDLEVBQWVDLFFBRTdELEdBQXVCLGlCQUFadEQsRUFBSyxHQUFpQixDQUNsQyxJQUFJd0QsRUFBVXhELEVBQUssR0FDZnlELEVBQVd6RCxFQUFLLEdBQ3BCaUQsRUFBVWQsU0FBU08sY0FBY2MsRUFBU0MsUUFFbkN6RCxFQUFLLGFBQWNzQyxVQUN4QlcsRUFBVWpELEVBQUssSUFHakJpRCxhQUFtQlgsVUFFaEJXLEVBQVEvRCx3Q0FDWCtELEVBQVU3RSxPQUFPc0YsaUJBQWlCVCxFQUFTaEUsK0JBSWIsRUFBNUJnRSxFQUFRSixXQUFXaEUsUUFHVG9FLEVBQVN0QixTQUFTekIsTUFBbEIrQyxFQUFrQ3RGLG1CQUFtQnNGLEVBQVFKLGNBSzdFLE9BQU9JLEVBR1QsQ0FBQyxJQUFLLE9BQVEsVUFBVyxPQUFRLFVBQVcsUUFBUyxRQUFTLElBQUssT0FBUSxNQUFPLE1BQU8sYUFBYyxPQUFRLEtBQU0sU0FBVSxTQUFVLFVBQVcsT0FBUSxPQUFRLE1BQU8sV0FBWSxPQUFRLFdBQVksS0FBTSxNQUFPLFVBQVcsTUFBTyxTQUFVLE1BQU8sS0FBTSxLQUFNLEtBQU0sUUFBUyxXQUFZLFNBQVUsU0FBVSxPQUFRLEtBQU0sS0FBTSxLQUFNLEtBQU0sS0FBTSxLQUFNLE9BQVEsU0FBVSxTQUFVLEtBQU0sT0FBUSxJQUFLLFNBQVUsTUFBTyxRQUFTLE1BQU8sTUFBTyxTQUFVLFFBQVMsU0FBVSxLQUFNLE9BQVEsT0FBUSxNQUFPLE9BQVEsT0FBUSxXQUFZLE9BQVEsUUFBUyxNQUFPLFdBQVksU0FBVSxLQUFNLFdBQVksU0FBVSxTQUFVLElBQUssUUFBUyxNQUFPLFdBQVksSUFBSyxLQUFNLEtBQU0sS0FBTSxNQUFPLE9BQVEsSUFBSyxPQUFRLFNBQVUsVUFBVyxTQUFVLFFBQVMsU0FBVSxPQUFRLFNBQVUsUUFBUyxNQUFPLFVBQVcsTUFBTyxRQUFTLFFBQVMsS0FBTSxXQUFZLFdBQVksUUFBUyxLQUFNLFFBQVMsT0FBUSxRQUFTLEtBQU0sUUFBUyxJQUFLLEtBQU0sTUFBTyxRQUFTLE9BQU9VLFFBQVEsU0FBVUMsR0FDdjdCLE9BQU9aLFVBQVVZLEdBQU8sU0FBVXhFLEdBQ2hDLE9BQU80RCxVQUFVWSxHQUFLeEUsU0FBU0EsTUFJbkM0RCxVQUFVYSxJQUFNLFdBQ2QsT0FBT0MsSUFBSSw2QkFBOEIsUUFHM0MsQ0FBQyxJQUFLLFVBQVcsZ0JBQWlCLG1CQUFvQixTQUFVLFdBQVksZ0JBQWlCLE9BQVEsT0FBUSxVQUFXLFVBQVcsVUFBVyxnQkFBaUIsc0JBQXVCLGNBQWUsbUJBQW9CLG9CQUFxQixvQkFBcUIsaUJBQWtCLGVBQWdCLFVBQVcsVUFBVyxVQUFXLFVBQVcsVUFBVyxpQkFBa0IsVUFBVyxVQUFXLGNBQWUsZUFBZ0IsV0FBWSxlQUFnQixxQkFBc0IsY0FBZSxTQUFVLGVBQWdCLFNBQVUsZ0JBQWlCLElBQUssUUFBUyxZQUFhLFFBQVMsT0FBUSxpQkFBa0IsU0FBVSxPQUFRLE9BQVEsZUFBZ0IsWUFBYSxVQUFXLFdBQVksUUFBUyxPQUFRLFVBQVcsVUFBVyxXQUFZLGlCQUFrQixPQUFRLFNBQVUsTUFBTyxhQUFjLE9BQVEsUUFBUyxTQUFVLFNBQVUsT0FBUSxXQUFZLFFBQVMsUUFBUyxVQUFXLE1BQU8sUUFBUUgsUUFBUSxTQUFVQyxHQUN0NEIsT0FBT1osVUFBVWEsSUFBSUQsR0FBTyxTQUFVeEUsR0FDcEMsT0FBTzRELFVBQVUsNkJBQThCWSxHQUFLeEUsU0FBU0EsTUFLakUsSUFBSTBFLElBQU1BLEtBQU9kIiwiZmlsZSI6InVpZmFjdG9yeS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpOyB9XG5cbmZ1bmN0aW9uIF9ub25JdGVyYWJsZVNwcmVhZCgpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlXCIpOyB9XG5cbmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXkoaXRlcikgeyBpZiAoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChpdGVyKSB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaXRlcikgPT09IFwiW29iamVjdCBBcmd1bWVudHNdXCIpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpOyB9XG5cbmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9IH1cblxuZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiOyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07IH0gcmV0dXJuIF90eXBlb2Yob2JqKTsgfVxuXG4vKiBleHBvcnRlZCB1aUZhY3RvcnlQcm9wZXJ0eURlc2NyaXB0b3JzICovXG52YXIgdWlGYWN0b3J5UHJvcGVydHlEZXNjcmlwdG9ycyA9IHtcbiAgZGVmaW5lZEJ5VWlGYWN0b3J5UHJvcGVydHlEZXNjcmlwdG9yczoge1xuICAgIHZhbHVlOiB0cnVlXG4gIH0sXG4gIC8vIENhbGxiYWNrXG4gIGNhbGxiYWNrOiB7XG4gICAgdmFsdWU6IGZ1bmN0aW9uIHZhbHVlKGNhbGxiYWNrKSB7XG4gICAgICAvLyBDYWxsYmFja1xuICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBjYWxsYmFjayh0aGlzKTtcbiAgICAgIH0gLy8gQWxsb3cgbWV0aG9kIGNoYWluaW5nXG5cblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgICB3cml0YWJsZTogdHJ1ZVxuICB9LFxuICAvLyBFdmVudHNcbiAgZXZlbnRzOiB7XG4gICAgdmFsdWU6IGZ1bmN0aW9uIHZhbHVlKGV2ZW50cywgY2FsbGJhY2spIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgIGlmIChldmVudHMgJiYgX3R5cGVvZihldmVudHMpID09PSAnb2JqZWN0Jykge1xuICAgICAgICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcCh0eXBlKSB7XG4gICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChldmVudHMsIHR5cGUpICYmIHR5cGVvZiBldmVudHNbdHlwZV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIF90aGlzLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICB2YXIgX2V2ZW50cyR0eXBlO1xuXG4gICAgICAgICAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICAgICAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAoX2V2ZW50cyR0eXBlID0gZXZlbnRzW3R5cGVdKS5jYWxsLmFwcGx5KF9ldmVudHMkdHlwZSwgW3RoaXNdLmNvbmNhdChhcmdzLCBbdGhpc10pKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBmb3IgKHZhciB0eXBlIGluIGV2ZW50cykge1xuICAgICAgICAgIF9sb29wKHR5cGUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgY2FsbGJhY2sodGhpcyk7XG4gICAgICB9IC8vIEFsbG93IG1ldGhvZCBjaGFpbmluZ1xuXG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgd3JpdGFibGU6IHRydWVcbiAgfSxcbiAgLy8gUHJvcGVydGllc1xuICBfcHJvcGVydGllczoge1xuICAgIHdyaXRhYmxlOiB0cnVlXG4gIH0sXG4gIHByb3BlcnRpZXM6IHtcbiAgICB2YWx1ZTogZnVuY3Rpb24gdmFsdWUoKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgdmFyIHByb3BlcnRpZXMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHRoaXMuX3Byb3BlcnRpZXM7XG4gICAgICB2YXIgY2FsbGJhY2sgPSBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMuX3Byb3BlcnRpZXMgPSBwcm9wZXJ0aWVzOyAvLyBSZW5kZXJcblxuICAgICAgdmFyIHJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcihwcm9wZXJ0eVZhbHVlLCBwcm9wZXJ0eU5hbWUsIHByb3BlcnRpZXMpIHtcbiAgICAgICAgLy8gcHJvcGVydHlWYWx1ZSA9IFByb21pc2VcbiAgICAgICAgaWYgKHByb3BlcnR5VmFsdWUgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgcmV0dXJuIHByb3BlcnR5VmFsdWUudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiByZW5kZXIodmFsdWUsIHByb3BlcnR5TmFtZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gLy8gcHJvcGVydHlWYWx1ZSA9IGZ1bmN0aW9uXG5cblxuICAgICAgICBpZiAodHlwZW9mIHByb3BlcnR5VmFsdWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICByZXR1cm4gcmVuZGVyKHByb3BlcnR5VmFsdWUuY2FsbChfdGhpczIsIF90aGlzMiksIHByb3BlcnR5TmFtZSk7XG4gICAgICAgIH0gLy8gcHJvcGVydHlWYWx1ZSA9IGFycmF5XG5cblxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShwcm9wZXJ0eVZhbHVlKSkge1xuICAgICAgICAgIHZhciB0ZW1wUHJvcGVydGllcyA9IHt9O1xuICAgICAgICAgIHZhciBwcm9taXNlcyA9IHByb3BlcnR5VmFsdWUubWFwKGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHtcbiAgICAgICAgICAgIHRlbXBQcm9wZXJ0aWVzW2luZGV4XSA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm4gcmVuZGVyKHZhbHVlLCBpbmRleCwgdGVtcFByb3BlcnRpZXMpO1xuICAgICAgICAgIH0pLmZpbHRlcihmdW5jdGlvbiAocHJvbWlzZSkge1xuICAgICAgICAgICAgcmV0dXJuIHByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaWYgKHByb3BlcnRpZXMgJiYgcHJvcGVydHlOYW1lICYmIE9iamVjdC5rZXlzKHRlbXBQcm9wZXJ0aWVzKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGRlbGV0ZSBwcm9wZXJ0aWVzW3Byb3BlcnR5TmFtZV07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHByb21pc2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcyk7XG4gICAgICAgICAgfVxuICAgICAgICB9IC8vIHByb3BlcnR5VmFsdWUgPSBvYmplY3RcblxuXG4gICAgICAgIGlmIChfdHlwZW9mKHByb3BlcnR5VmFsdWUpID09PSAnb2JqZWN0JyAmJiBwcm9wZXJ0eVZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgICAgdmFyIF9wcm9taXNlcyA9IE9iamVjdC5rZXlzKHByb3BlcnR5VmFsdWUpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICByZXR1cm4gcmVuZGVyKHByb3BlcnR5VmFsdWVba2V5XSwga2V5LCBwcm9wZXJ0eVZhbHVlKTtcbiAgICAgICAgICB9KS5maWx0ZXIoZnVuY3Rpb24gKHByb21pc2UpIHtcbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlIGluc3RhbmNlb2YgUHJvbWlzZTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmIChwcm9wZXJ0aWVzICYmIHByb3BlcnR5TmFtZSAmJiBPYmplY3Qua2V5cyhwcm9wZXJ0eVZhbHVlKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGRlbGV0ZSBwcm9wZXJ0aWVzW3Byb3BlcnR5TmFtZV07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKF9wcm9taXNlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoX3Byb21pc2VzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gLy8gcHJvcGVydHlOYW1lICYgcHJvcGVydHlWYWx1ZSA9ICFudWxsXG5cblxuICAgICAgICBpZiAocHJvcGVydHlOYW1lKSB7XG4gICAgICAgICAgaWYgKHByb3BlcnR5VmFsdWUgPT0gbnVsbCkge1xuICAgICAgICAgICAgX3RoaXMyLnJlbW92ZUF0dHJpYnV0ZShwcm9wZXJ0eU5hbWUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBfdGhpczIuc2V0QXR0cmlidXRlKHByb3BlcnR5TmFtZSwgcHJvcGVydHlWYWx1ZSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBwcm9wZXJ0aWVzW3Byb3BlcnR5TmFtZV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICB2YXIgcmVzdWx0ID0gcmVuZGVyKHRoaXMuX3Byb3BlcnRpZXMpOyAvLyBDYWxsYmFja1xuXG4gICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgcmVzdWx0LnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY2FsbGJhY2soX3RoaXMyKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjYWxsYmFjayh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgfSAvLyBBbGxvdyBtZXRob2QgY2hhaW5pbmdcblxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICAgIHdyaXRhYmxlOiB0cnVlXG4gIH0sXG4gIC8vIENvbnRlbnRzXG4gIF9jb250ZW50czoge1xuICAgIHdyaXRhYmxlOiB0cnVlXG4gIH0sXG4gIGNvbnRlbnRzOiB7XG4gICAgdmFsdWU6IGZ1bmN0aW9uIHZhbHVlKGNvbnRlbnRzLCBjYWxsYmFjaykge1xuICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgIHZhciBjYWxsUmVuZGVyT25jb250ZW50cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogZmFsc2U7XG4gICAgICB0aGlzLl9jb250ZW50cyA9IGNvbnRlbnRzO1xuXG4gICAgICB3aGlsZSAodGhpcy5maXJzdENoaWxkKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlQ2hpbGQodGhpcy5maXJzdENoaWxkKTtcbiAgICAgIH0gLy8gUmVuZGVyXG5cblxuICAgICAgdmFyIHJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcihpdGVtKSB7XG4gICAgICAgIHZhciBwbGFjZWhvbGRlciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogX3RoaXMzLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcnKSk7XG5cbiAgICAgICAgLy8gaXRlbSA9IFByb21pc2VcbiAgICAgICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgcmV0dXJuIGl0ZW0udGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiByZW5kZXIodmFsdWUsIHBsYWNlaG9sZGVyKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSAvLyBpdGVtID0gZnVuY3Rpb25cblxuXG4gICAgICAgIGlmICh0eXBlb2YgaXRlbSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHJldHVybiByZW5kZXIoaXRlbShfdGhpczMpLCBwbGFjZWhvbGRlcik7XG4gICAgICAgIH0gLy8gaXRlbSA9IGFycmF5XG5cblxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShpdGVtKSkge1xuICAgICAgICAgIHZhciBwcm9taXNlcyA9IGl0ZW0ubWFwKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlbmRlcih2YWx1ZSwgX3RoaXMzLmluc2VydEJlZm9yZShkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnJyksIHBsYWNlaG9sZGVyKSk7XG4gICAgICAgICAgfSkuZmlsdGVyKGZ1bmN0aW9uIChwcm9taXNlKSB7XG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2U7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBfdGhpczMucmVtb3ZlQ2hpbGQocGxhY2Vob2xkZXIpO1xuXG4gICAgICAgICAgcmV0dXJuIHByb21pc2VzLmxlbmd0aCA+IDAgJiYgUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xuICAgICAgICB9IC8vIGl0ZW0gPSBvYmplY3RcblxuXG4gICAgICAgIGlmIChfdHlwZW9mKGl0ZW0pID09PSAnb2JqZWN0JyAmJiBpdGVtICE9PSBudWxsICYmICEoaXRlbSBpbnN0YW5jZW9mIEVsZW1lbnQpICYmICEoaXRlbSBpbnN0YW5jZW9mIFRleHQpKSB7XG4gICAgICAgICAgdmFyIF9wcm9taXNlczIgPSBPYmplY3Qua2V5cyhpdGVtKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlbmRlcihpdGVtW2tleV0sIF90aGlzMy5pbnNlcnRCZWZvcmUoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJycpLCBwbGFjZWhvbGRlcikpO1xuICAgICAgICAgIH0pLmZpbHRlcihmdW5jdGlvbiAocHJvbWlzZSkge1xuICAgICAgICAgICAgcmV0dXJuIHByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgX3RoaXMzLnJlbW92ZUNoaWxkKHBsYWNlaG9sZGVyKTtcblxuICAgICAgICAgIHJldHVybiBfcHJvbWlzZXMyLmxlbmd0aCA+IDAgJiYgUHJvbWlzZS5hbGwoX3Byb21pc2VzMik7XG4gICAgICAgIH0gLy8gaXRlbSA9IGJvb2xlYW4vbnVtYmVyL3N0cmluZ1xuXG5cbiAgICAgICAgaWYgKHR5cGVvZiBpdGVtID09PSAnYm9vbGVhbicgfHwgdHlwZW9mIGl0ZW0gPT09ICdudW1iZXInIHx8IHR5cGVvZiBpdGVtID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIHZhciB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgd3JhcHBlci5pbm5lckhUTUwgPSBTdHJpbmcoaXRlbSk7XG4gICAgICAgICAgcmV0dXJuIHJlbmRlcihfdG9Db25zdW1hYmxlQXJyYXkod3JhcHBlci5jaGlsZE5vZGVzKSwgcGxhY2Vob2xkZXIpO1xuICAgICAgICB9IC8vIGl0ZW0gPSBFbGVtZW50fFRleHRcblxuXG4gICAgICAgIGlmIChpdGVtIGluc3RhbmNlb2YgRWxlbWVudCB8fCBpdGVtIGluc3RhbmNlb2YgVGV4dCkge1xuICAgICAgICAgIF90aGlzMy5pbnNlcnRCZWZvcmUoaXRlbSwgcGxhY2Vob2xkZXIpO1xuICAgICAgICB9IC8vIFJlbW92ZSBwbGFjZWhvbGRlclxuXG5cbiAgICAgICAgX3RoaXMzLnJlbW92ZUNoaWxkKHBsYWNlaG9sZGVyKTsgLy8gUmVuZGVyIGl0ZW1cblxuXG4gICAgICAgIGlmIChpdGVtIGluc3RhbmNlb2YgRWxlbWVudCAmJiBpdGVtLmRlZmluZWRCeVVpRmFjdG9yeVByb3BlcnR5RGVzY3JpcHRvcnMgJiYgY2FsbFJlbmRlck9uY29udGVudHMpIHtcbiAgICAgICAgICByZXR1cm4gaXRlbS5yZW5kZXIoKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgdmFyIHJlc3VsdCA9IHJlbmRlcih0aGlzLl9jb250ZW50cyk7IC8vIENhbGxiYWNrXG5cbiAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICByZXN1bHQudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhfdGhpczMpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNhbGxiYWNrKHRoaXMpO1xuICAgICAgICB9XG4gICAgICB9IC8vIEFsbG93IG1ldGhvZCBjaGFpbmluZ1xuXG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgd3JpdGFibGU6IHRydWVcbiAgfSxcbiAgLy8gUmVuZGVyXG4gIHJlbmRlcjoge1xuICAgIHZhbHVlOiBmdW5jdGlvbiB2YWx1ZShjYWxsYmFjaykge1xuICAgICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICAgIHZhciBwcm9taXNlcyA9IFtuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICByZXR1cm4gX3RoaXM0LnByb3BlcnRpZXMoX3RoaXM0Ll9wcm9wZXJ0aWVzLCByZXNvbHZlKTtcbiAgICAgIH0pLCBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICByZXR1cm4gX3RoaXM0LmNvbnRlbnRzKF90aGlzNC5fY29udGVudHMsIHJlc29sdmUsIHRydWUpO1xuICAgICAgfSldOyAvLyBDYWxsYmFja1xuXG4gICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBjYWxsYmFjayhfdGhpczQpO1xuICAgICAgICB9KTtcbiAgICAgIH0gLy8gQWxsb3cgbWV0aG9kIGNoYWluaW5nXG5cblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgICB3cml0YWJsZTogdHJ1ZVxuICB9XG59O1xuLyogZXhwb3J0ZWQgdWlGYWN0b3J5ICovXG5cbmZ1bmN0aW9uIHVpRmFjdG9yeSgpIHtcbiAgdmFyIGVsZW1lbnQ7IC8vIGFyZ3MgPSBbc3RyaW5nLCBzdHJpbmcsIG9iamVjdD9dXG5cbiAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4yKSwgX2tleTIgPSAwOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7XG4gICAgYXJnc1tfa2V5Ml0gPSBhcmd1bWVudHNbX2tleTJdO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBhcmdzWzBdID09PSAnc3RyaW5nJyAmJiB0eXBlb2YgYXJnc1sxXSA9PT0gJ3N0cmluZycpIHtcbiAgICB2YXIgbmFtZXNwYWNlVVJJID0gYXJnc1swXSxcbiAgICAgICAgcXVhbGlmaWVkTmFtZSA9IGFyZ3NbMV0sXG4gICAgICAgIG9wdGlvbnMgPSBhcmdzWzJdO1xuICAgIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMobmFtZXNwYWNlVVJJLCBxdWFsaWZpZWROYW1lLCBvcHRpb25zKTtcbiAgfSAvLyBhcmdzID0gW3N0cmluZywgb2JqZWN0P11cbiAgZWxzZSBpZiAodHlwZW9mIGFyZ3NbMF0gPT09ICdzdHJpbmcnKSB7XG4gICAgICB2YXIgdGFnTmFtZSA9IGFyZ3NbMF0sXG4gICAgICAgICAgX29wdGlvbnMgPSBhcmdzWzFdO1xuICAgICAgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnTmFtZSwgX29wdGlvbnMpO1xuICAgIH0gLy8gYXJncyA9IFtFbGVtZW50XVxuICAgIGVsc2UgaWYgKGFyZ3NbMF0gaW5zdGFuY2VvZiBFbGVtZW50KSB7XG4gICAgICAgIGVsZW1lbnQgPSBhcmdzWzBdO1xuICAgICAgfVxuXG4gIGlmIChlbGVtZW50IGluc3RhbmNlb2YgRWxlbWVudCkge1xuICAgIC8vIERlZmluZSBwcm9wZXJ0aWVzXG4gICAgaWYgKCFlbGVtZW50LmRlZmluZWRCeVVpRmFjdG9yeVByb3BlcnR5RGVzY3JpcHRvcnMpIHtcbiAgICAgIGVsZW1lbnQgPSBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlbGVtZW50LCB1aUZhY3RvcnlQcm9wZXJ0eURlc2NyaXB0b3JzKTtcbiAgICB9IC8vIEFkZCBpbml0aWFsIGNvbnRlbnQgLSBmb3IgcmVyZW5kZXJpbmdcblxuXG4gICAgaWYgKGVsZW1lbnQuY2hpbGROb2Rlcy5sZW5ndGggPiAwKSB7XG4gICAgICB2YXIgX2VsZW1lbnQ7XG5cbiAgICAgIChfZWxlbWVudCA9IGVsZW1lbnQpLmNvbnRlbnRzLmFwcGx5KF9lbGVtZW50LCBfdG9Db25zdW1hYmxlQXJyYXkoZWxlbWVudC5jaGlsZE5vZGVzKSk7XG4gICAgfVxuICB9IC8vIFJldHVybiBlbGVtZW50IGFuZCBzdGFydCBtZXRob2QgY2hhaW5pbmdcblxuXG4gIHJldHVybiBlbGVtZW50O1xufVxuXG5bJ2EnLCAnYWJicicsICdhZGRyZXNzJywgJ2FyZWEnLCAnYXJ0aWNsZScsICdhc2lkZScsICdhdWRpbycsICdiJywgJ2Jhc2UnLCAnYmRpJywgJ2JkbycsICdibG9ja3F1b3RlJywgJ2JvZHknLCAnYnInLCAnYnV0dG9uJywgJ2NhbnZhcycsICdjYXB0aW9uJywgJ2NpdGUnLCAnY29kZScsICdjb2wnLCAnY29sZ3JvdXAnLCAnZGF0YScsICdkYXRhbGlzdCcsICdkZCcsICdkZWwnLCAnZGV0YWlscycsICdkZm4nLCAnZGlhbG9nJywgJ2RpdicsICdkbCcsICdkdCcsICdlbScsICdlbWJlZCcsICdmaWVsZHNldCcsICdmaWd1cmUnLCAnZm9vdGVyJywgJ2Zvcm0nLCAnaDEnLCAnaDInLCAnaDMnLCAnaDQnLCAnaDUnLCAnaDYnLCAnaGVhZCcsICdoZWFkZXInLCAnaGdyb3VwJywgJ2hyJywgJ2h0bWwnLCAnaScsICdpZnJhbWUnLCAnaW1nJywgJ2lucHV0JywgJ2lucycsICdrYmQnLCAna2V5Z2VuJywgJ2xhYmVsJywgJ2xlZ2VuZCcsICdsaScsICdsaW5rJywgJ21haW4nLCAnbWFwJywgJ21hcmsnLCAnbWVudScsICdtZW51aXRlbScsICdtZXRhJywgJ21ldGVyJywgJ25hdicsICdub3NjcmlwdCcsICdvYmplY3QnLCAnb2wnLCAnb3B0Z3JvdXAnLCAnb3B0aW9uJywgJ291dHB1dCcsICdwJywgJ3BhcmFtJywgJ3ByZScsICdwcm9ncmVzcycsICdxJywgJ3JiJywgJ3JwJywgJ3J0JywgJ3J0YycsICdydWJ5JywgJ3MnLCAnc2FtcCcsICdzY3JpcHQnLCAnc2VjdGlvbicsICdzZWxlY3QnLCAnc21hbGwnLCAnc291cmNlJywgJ3NwYW4nLCAnc3Ryb25nJywgJ3N0eWxlJywgJ3N1YicsICdzdW1tYXJ5JywgJ3N1cCcsICd0YWJsZScsICd0Ym9keScsICd0ZCcsICd0ZW1wbGF0ZScsICd0ZXh0YXJlYScsICd0Zm9vdCcsICd0aCcsICd0aGVhZCcsICd0aW1lJywgJ3RpdGxlJywgJ3RyJywgJ3RyYWNrJywgJ3UnLCAndWwnLCAndmFyJywgJ3ZpZGVvJywgJ3diciddLmZvckVhY2goZnVuY3Rpb24gKHRhZykge1xuICByZXR1cm4gdWlGYWN0b3J5W3RhZ10gPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICByZXR1cm4gdWlGYWN0b3J5KHRhZykuY2FsbGJhY2soY2FsbGJhY2spO1xuICB9O1xufSk7XG5cbnVpRmFjdG9yeS5zdmcgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB1aWYoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3N2ZycpO1xufTtcblxuWydhJywgJ2FuaW1hdGUnLCAnYW5pbWF0ZU1vdGlvbicsICdhbmltYXRlVHJhbnNmb3JtJywgJ2NpcmNsZScsICdjbGlwUGF0aCcsICdjb2xvci1wcm9maWxlJywgJ2RlZnMnLCAnZGVzYycsICdkaXNjYXJkJywgJ2VsbGlwc2UnLCAnZmVCbGVuZCcsICdmZUNvbG9yTWF0cml4JywgJ2ZlQ29tcG9uZW50VHJhbnNmZXInLCAnZmVDb21wb3NpdGUnLCAnZmVDb252b2x2ZU1hdHJpeCcsICdmZURpZmZ1c2VMaWdodGluZycsICdmZURpc3BsYWNlbWVudE1hcCcsICdmZURpc3RhbnRMaWdodCcsICdmZURyb3BTaGFkb3cnLCAnZmVGbG9vZCcsICdmZUZ1bmNBJywgJ2ZlRnVuY0InLCAnZmVGdW5jRycsICdmZUZ1bmNSJywgJ2ZlR2F1c3NpYW5CbHVyJywgJ2ZlSW1hZ2UnLCAnZmVNZXJnZScsICdmZU1lcmdlTm9kZScsICdmZU1vcnBob2xvZ3knLCAnZmVPZmZzZXQnLCAnZmVQb2ludExpZ2h0JywgJ2ZlU3BlY3VsYXJMaWdodGluZycsICdmZVNwb3RMaWdodCcsICdmZVRpbGUnLCAnZmVUdXJidWxlbmNlJywgJ2ZpbHRlcicsICdmb3JlaWduT2JqZWN0JywgJ2cnLCAnaGF0Y2gnLCAnaGF0Y2hwYXRoJywgJ2ltYWdlJywgJ2xpbmUnLCAnbGluZWFyR3JhZGllbnQnLCAnbWFya2VyJywgJ21hc2snLCAnbWVzaCcsICdtZXNoZ3JhZGllbnQnLCAnbWVzaHBhdGNoJywgJ21lc2hyb3cnLCAnbWV0YWRhdGEnLCAnbXBhdGgnLCAncGF0aCcsICdwYXR0ZXJuJywgJ3BvbHlnb24nLCAncG9seWxpbmUnLCAncmFkaWFsR3JhZGllbnQnLCAncmVjdCcsICdzY3JpcHQnLCAnc2V0JywgJ3NvbGlkY29sb3InLCAnc3RvcCcsICdzdHlsZScsICdzd2l0Y2gnLCAnc3ltYm9sJywgJ3RleHQnLCAndGV4dFBhdGgnLCAndGl0bGUnLCAndHNwYW4nLCAndW5rbm93bicsICd1c2UnLCAndmlldyddLmZvckVhY2goZnVuY3Rpb24gKHRhZykge1xuICByZXR1cm4gdWlGYWN0b3J5LnN2Z1t0YWddID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIHVpRmFjdG9yeSgnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCB0YWcpLmNhbGxiYWNrKGNhbGxiYWNrKTtcbiAgfTtcbn0pO1xuLyogZXhwb3J0ZWQgdWlmICovXG5cbnZhciB1aWYgPSB1aWYgfHwgdWlGYWN0b3J5OyJdfQ==
