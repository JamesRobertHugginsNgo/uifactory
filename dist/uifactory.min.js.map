{"version":3,"sources":["uifactory.js"],"names":["_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","TypeError","iter","Symbol","iterator","Object","prototype","toString","call","Array","from","isArray","i","arr2","length","_typeof","obj","constructor","uiFactory_PropertyDescriptors","definedByUiFactoryPropertyDescriptors","value","callback","this","writable","attributesData","renderAttributes","_this","attributes","arguments","undefined","result","renderLoop","name","Promise","then","tempAttributes","promises","map","index","filter","promise","keys","all","_promises","key","removeAttribute","setAttribute","childElementsData","renderChildElements","_this2","childElements","reRender","firstChild","removeChild","element","placeholder","appendChild","document","createTextNode","insertBefore","Element","Text","_promises2","render","wrapper","createElement","innerHTML","String","childNodes","_this3","resolve","uiFactory","createElementNS","defineProperties","cbk"],"mappings":"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","file":"uifactory.min.js","sourcesContent":["\"use strict\";\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar uiFactory_PropertyDescriptors = {\n  definedByUiFactoryPropertyDescriptors: {\n    value: true\n  },\n  callback: {\n    value: function value(callback) {\n      callback && callback(this);\n      return this;\n    },\n    writable: true\n  },\n  attributesData: {\n    writable: true\n  },\n  renderAttributes: {\n    value: function value() {\n      var _this = this;\n\n      var attributes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.attributesData;\n      var callback = arguments.length > 1 ? arguments[1] : undefined;\n      this.attributesData = attributes;\n\n      var renderLoop = function renderLoop(value, name, attributes) {\n        // PROMISE VALUE\n        if (value instanceof Promise) {\n          return value.then(function (value) {\n            return renderLoop(value, name);\n          });\n        } // FUNCTION VALUE\n\n\n        if (typeof value === 'function') {\n          return renderLoop(value(_this), name);\n        } // ARRAY VALUE\n\n\n        if (Array.isArray(value)) {\n          var tempAttributes = {};\n          var promises = value.map(function (value, index) {\n            tempAttributes[index] = true;\n            return renderLoop(value, index, tempAttributes);\n          }).filter(function (promise) {\n            return promise instanceof Promise;\n          });\n\n          if (attributes && name && Object.keys(tempAttributes).length === 0) {\n            delete attributes[name];\n          }\n\n          return promises.length > 0 && Promise.all(promises);\n        } // OBJECT VALUE\n\n\n        if (_typeof(value) === 'object' && value !== null) {\n          var _promises = Object.keys(value).map(function (key) {\n            return renderLoop(value[key], key, value);\n          }).filter(function (promise) {\n            return promise instanceof Promise;\n          });\n\n          if (attributes && name && Object.keys(value).length === 0) {\n            delete attributes[name];\n          }\n\n          return _promises.length > 0 && Promise.all(_promises);\n        } // KEY + VALUE\n\n\n        if (name) {\n          if (value == null) {\n            _this.removeAttribute(name);\n          } else {\n            _this.setAttribute(name, value);\n          }\n\n          if (attributes) {\n            delete attributes[name];\n          }\n        }\n      };\n\n      var result = renderLoop(this.attributesData);\n\n      if (callback) {\n        if (result instanceof Promise) {\n          result.then(function () {\n            return callback(_this);\n          });\n        } else {\n          callback(this);\n        }\n      }\n\n      return this;\n    },\n    writable: true\n  },\n  childElementsData: {\n    writable: true\n  },\n  renderChildElements: {\n    value: function value() {\n      var _this2 = this;\n\n      var childElements = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.childElementsData;\n      var callback = arguments.length > 1 ? arguments[1] : undefined;\n      var reRender = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      this.childElementsData = childElements;\n\n      var renderLoop = function renderLoop(element) {\n        var placeholder = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _this2.appendChild(document.createTextNode(''));\n\n        // PROMISE VALUE\n        if (element instanceof Promise) {\n          return element.then(function (value) {\n            return renderLoop(value, placeholder);\n          });\n        } // FUNCTION VALUE\n\n\n        if (typeof element === 'function') {\n          return renderLoop(element(_this2), placeholder);\n        } // ARRAY VALUE\n\n\n        if (Array.isArray(element)) {\n          var promises = element.map(function (value) {\n            return renderLoop(value, _this2.insertBefore(document.createTextNode(''), placeholder));\n          }).filter(function (promise) {\n            return promise instanceof Promise;\n          });\n\n          _this2.removeChild(placeholder);\n\n          return promises.length > 0 && Promise.all(promises);\n        } // OBJECT VALUE\n\n\n        if (_typeof(element) === 'object' && element !== null && !(element instanceof Element) && !(element instanceof Text)) {\n          var _promises2 = Object.keys(element).map(function (key) {\n            return renderLoop(element[key], _this2.insertBefore(document.createTextNode(''), placeholder));\n          }).filter(function (promise) {\n            return promise instanceof Promise;\n          });\n\n          _this2.removeChild(placeholder);\n\n          return _promises2.length > 0 && Promise.all(_promises2);\n        } // BOOLEAN, NUMBER OR STRING VALUE\n\n\n        if (typeof element === 'boolean' || typeof element === 'number' || typeof element === 'string') {\n          var wrapper = document.createElement('div');\n          wrapper.innerHTML = String(element);\n          return renderLoop(_toConsumableArray(wrapper.childNodes), placeholder);\n        } // ELEMENT / TEXT VALUE\n\n\n        if (element instanceof Element || element instanceof Text) {\n          _this2.insertBefore(element, placeholder);\n        } // REMOVE PLACEHOLDER\n\n\n        _this2.removeChild(placeholder);\n\n        if (element instanceof Element && element.definedByUiFactoryPropertyDescriptors) {\n          return reRender && element.render();\n        }\n      };\n\n      while (this.firstChild) {\n        this.removeChild(this.firstChild);\n      }\n\n      var result = renderLoop(this.childElementsData);\n\n      if (callback) {\n        if (result instanceof Promise) {\n          result.then(function () {\n            return callback(_this2);\n          });\n        } else {\n          callback(this);\n        }\n      }\n\n      return this;\n    },\n    writable: true\n  },\n  render: {\n    value: function value(callback) {\n      var _this3 = this;\n\n      Promise.all([new Promise(function (resolve) {\n        return _this3.renderAttributes(_this3.attributesData, resolve);\n      }), new Promise(function (resolve) {\n        return _this3.renderChildElements(_this3.childElementsData, resolve, true);\n      })]).then(function () {\n        return callback && callback(_this3);\n      });\n      return this;\n    },\n    writable: true\n  }\n};\n/* exported uiFactory */\n\nfunction uiFactory() {\n  var element, callback;\n\n  if ((arguments.length <= 0 ? undefined : arguments[0]) instanceof Element) {\n    element = arguments.length <= 0 ? undefined : arguments[0];\n    callback = arguments.length <= 1 ? undefined : arguments[1];\n  } else if (typeof (arguments.length <= 1 ? undefined : arguments[1]) === 'string') {\n    element = document.createElementNS(arguments.length <= 0 ? undefined : arguments[0], arguments.length <= 1 ? undefined : arguments[1]);\n    callback = arguments.length <= 2 ? undefined : arguments[2];\n  } else {\n    element = document.createElement(arguments.length <= 0 ? undefined : arguments[0]);\n    callback = arguments.length <= 1 ? undefined : arguments[1];\n  }\n\n  if (!element.definedByUiFactoryPropertyDescriptors) {\n    Object.defineProperties(element, uiFactory_PropertyDescriptors);\n  }\n\n  element.childElementsData = _toConsumableArray(element.childNodes);\n  return element.cbk(callback);\n}"]}