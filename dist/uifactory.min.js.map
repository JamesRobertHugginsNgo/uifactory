{"version":3,"sources":["uifactory.js"],"names":["_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","TypeError","iter","Symbol","iterator","Object","prototype","toString","call","Array","from","isArray","i","arr2","length","_typeof","obj","constructor","uiFactory_PropertyDescriptors","definedByUiFactoryPropertyDescriptors","value","attributesData","writable","childElementsData","callback","this","renderAttributes","attributes","_this","result","renderLoop","name","Promise","then","tempAttributes","promises","map","index","filter","promise","keys","all","_promises","key","removeAttribute","setAttribute","renderChildElements","childElements","_this2","reRender","arguments","undefined","firstChild","removeChild","element","placeholder","appendChild","document","createTextNode","insertBefore","Element","Text","_promises2","render","wrapper","createElement","innerHTML","String","childNodes","_this3","resolve","uiFactory","createElementNS","defineProperties","cbk"],"mappings":"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","file":"uifactory.min.js","sourcesContent":["\"use strict\";\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar uiFactory_PropertyDescriptors = {\n  definedByUiFactoryPropertyDescriptors: {\n    value: true\n  },\n  attributesData: {\n    writable: true\n  },\n  childElementsData: {\n    writable: true\n  },\n  callback: {\n    value: function value(callback) {\n      callback && callback(this);\n      return this;\n    },\n    writable: true\n  },\n  renderAttributes: {\n    value: function value(attributes, callback) {\n      var _this = this;\n\n      this.attributesData = attributes;\n\n      var renderLoop = function renderLoop(value, name, attributes) {\n        // PROMISE VALUE\n        if (value instanceof Promise) {\n          return value.then(function (value) {\n            return renderLoop(value, name);\n          });\n        } // FUNCTION VALUE\n\n\n        if (typeof value === 'function') {\n          return renderLoop(value(_this), name);\n        } // ARRAY VALUE\n\n\n        if (Array.isArray(value)) {\n          var tempAttributes = {};\n          var promises = value.map(function (value, index) {\n            tempAttributes[index] = true;\n            return renderLoop(value, index, tempAttributes);\n          }).filter(function (promise) {\n            return promise instanceof Promise;\n          });\n\n          if (attributes && name && Object.keys(tempAttributes).length === 0) {\n            delete attributes[name];\n          }\n\n          return promises.length > 0 && Promise.all(promises);\n        } // OBJECT VALUE\n\n\n        if (_typeof(value) === 'object' && value !== null) {\n          var _promises = Object.keys(value).map(function (key) {\n            return renderLoop(value[key], key, value);\n          }).filter(function (promise) {\n            return promise instanceof Promise;\n          });\n\n          if (attributes && name && Object.keys(value).length === 0) {\n            delete attributes[name];\n          }\n\n          return _promises.length > 0 && Promise.all(_promises);\n        } // KEY + VALUE\n\n\n        if (name) {\n          if (value == null) {\n            _this.removeAttribute(name);\n          } else {\n            _this.setAttribute(name, value);\n          }\n\n          if (attributes) {\n            delete attributes[name];\n          }\n        }\n      };\n\n      var result = renderLoop(this.attributesData);\n\n      if (callback) {\n        if (result instanceof Promise) {\n          result.then(function () {\n            return callback(_this);\n          });\n        } else {\n          callback(this);\n        }\n      }\n\n      return this;\n    },\n    writable: true\n  },\n  renderChildElements: {\n    value: function value(childElements, callback) {\n      var _this2 = this;\n\n      var reRender = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      this.childElementsData = childElements;\n\n      var renderLoop = function renderLoop(element) {\n        var placeholder = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _this2.appendChild(document.createTextNode(''));\n\n        // PROMISE VALUE\n        if (element instanceof Promise) {\n          return element.then(function (value) {\n            return renderLoop(value, placeholder);\n          });\n        } // FUNCTION VALUE\n\n\n        if (typeof element === 'function') {\n          return renderLoop(element(_this2), placeholder);\n        } // ARRAY VALUE\n\n\n        if (Array.isArray(element)) {\n          var promises = element.map(function (value) {\n            return renderLoop(value, _this2.insertBefore(document.createTextNode(''), placeholder));\n          }).filter(function (promise) {\n            return promise instanceof Promise;\n          });\n\n          _this2.removeChild(placeholder);\n\n          return promises.length > 0 && Promise.all(promises);\n        } // OBJECT VALUE\n\n\n        if (_typeof(element) === 'object' && element !== null && !(element instanceof Element) && !(element instanceof Text)) {\n          var _promises2 = Object.keys(element).map(function (key) {\n            return renderLoop(element[key], _this2.insertBefore(document.createTextNode(''), placeholder));\n          }).filter(function (promise) {\n            return promise instanceof Promise;\n          });\n\n          _this2.removeChild(placeholder);\n\n          return _promises2.length > 0 && Promise.all(_promises2);\n        } // BOOLEAN, NUMBER OR STRING VALUE\n\n\n        if (typeof element === 'boolean' || typeof element === 'number' || typeof element === 'string') {\n          var wrapper = document.createElement('div');\n          wrapper.innerHTML = String(element);\n          return renderLoop(_toConsumableArray(wrapper.childNodes), placeholder);\n        } // ELEMENT / TEXT VALUE\n\n\n        if (element instanceof Element || element instanceof Text) {\n          _this2.insertBefore(element, placeholder);\n        } // REMOVE PLACEHOLDER\n\n\n        _this2.removeChild(placeholder);\n\n        if (element instanceof Element && element.definedByUiFactoryPropertyDescriptors) {\n          return reRender && element.render();\n        }\n      };\n\n      while (this.firstChild) {\n        this.removeChild(this.firstChild);\n      }\n\n      var result = renderLoop(this.childElementsData);\n\n      if (callback) {\n        if (result instanceof Promise) {\n          result.then(function () {\n            return callback(_this2);\n          });\n        } else {\n          callback(this);\n        }\n      }\n\n      return this;\n    },\n    writable: true\n  },\n  render: {\n    value: function value(callback) {\n      var _this3 = this;\n\n      Promise.all([new Promise(function (resolve) {\n        return _this3.renderAttributes(_this3.attributesData, resolve);\n      }), new Promise(function (resolve) {\n        return _this3.renderChildElements(_this3.childElementsData, resolve, true);\n      })]).then(function () {\n        return callback && callback(_this3);\n      });\n      return this;\n    },\n    writable: true\n  }\n};\n/* exported uiFactory */\n\nfunction uiFactory() {\n  var element, callback;\n\n  if ((arguments.length <= 0 ? undefined : arguments[0]) instanceof Element) {\n    element = arguments.length <= 0 ? undefined : arguments[0];\n    callback = arguments.length <= 1 ? undefined : arguments[1];\n  } else if (typeof (arguments.length <= 1 ? undefined : arguments[1]) === 'string') {\n    element = document.createElementNS(arguments.length <= 0 ? undefined : arguments[0], arguments.length <= 1 ? undefined : arguments[1]);\n    callback = arguments.length <= 2 ? undefined : arguments[2];\n  } else {\n    element = document.createElement(arguments.length <= 0 ? undefined : arguments[0]);\n    callback = arguments.length <= 1 ? undefined : arguments[1];\n  }\n\n  if (!element.definedByUiFactoryPropertyDescriptors) {\n    Object.defineProperties(element, uiFactory_PropertyDescriptors);\n  }\n\n  element.childElementsData = _toConsumableArray(element.childNodes);\n  return element.cbk(callback);\n}"]}